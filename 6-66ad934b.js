(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{51:function(t,e,s){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,s=1,i=arguments.length;s<i;s++)for(var o in e=arguments[s])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__read||function(t,e){var s="function"==typeof Symbol&&t[Symbol.iterator];if(!s)return t;var i,o,n=s.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(i=n.next()).done;)r.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(s=n.return)&&s.call(n)}finally{if(o)throw o.error}}return r},n=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t},r=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],s=0;return e?e.call(t):{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var a=s(52),h=s(53),l={data:[],isAllowOverSelection:!0,onSelected:function(){}},c=function(){function t(t,e){this.dragSelectorMain=null,this.option=null,this.selector="",this.elementSelection=null,this.mouseMoveRafId=-1,this.state=null,this.dragSelectorMain=new a.DragSelectorMain,this.selector=t||".drag-selector",this.option=i({},l,e),this.receiveClientBroadcast=this.receiveClientBroadcast.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onResize=this.onResize.bind(this),this.removeSelectArea=this.removeSelectArea.bind(this),this.setActive=this.setActive.bind(this),this.destroy=this.destroy.bind(this),this.initialize()}return t.prototype.initialize=function(){var t,e,s=this;this.state={wrapper:document.querySelector(this.selector),objects:document.querySelectorAll(this.selector+" .drag-selector-item"),data:n(this.option.data),isActive:!0,isMouseDown:!1,isControlKeyPressed:!1,isShiftKeyPressed:!1,mousePos:{startX:0,startY:0,endX:0,endY:0}},this.state.wrapper.style.position="relative",this.state.wrapper.ondragstart=function(){return!1},this.state.wrapper.ondblclick=function(){return!1};var i=[];try{for(var o=r(this.state.objects),a=o.next();!a.done;a=o.next()){var l=a.value;i.push(l)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}i.forEach(function(t,e){s.dragSelectorMain.addObserver(new h.DragSelectorClient({el:t,index:e,broadcast:s.receiveClientBroadcast}))}),this.elementSelection=document.createElement("span"),this.elementSelection.className="drag-selector-selection",this.elementSelection.style.display="none",this.elementSelection.style.position="absolute",this.elementSelection.style.cursor="inherit",this.elementSelection.style.boxSizing="border-box",this.removeSelectArea(),this.state.wrapper.appendChild(this.elementSelection),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),window.addEventListener("mousedown",this.onMouseDown,!1),window.addEventListener("resize",this.onResize,!1)},t.prototype.notifyEvent=function(){this.state.isControlKeyPressed?this.dragSelectorMain.notifyAll("DRAG_ADD",this.state.mousePos):this.state.isShiftKeyPressed?this.dragSelectorMain.notifyAll("DRAG_SUB",this.state.mousePos):this.dragSelectorMain.notifyAll("DRAG",this.state.mousePos)},t.prototype.setCursor=function(){this.state.isControlKeyPressed?(this.state.wrapper.classList.add("add"),this.state.wrapper.classList.remove("sub")):this.state.isShiftKeyPressed?(this.state.wrapper.classList.remove("add"),this.state.wrapper.classList.add("sub")):(this.state.wrapper.classList.remove("add"),this.state.wrapper.classList.remove("sub"))},t.prototype.receiveClientBroadcast=function(t,e,s){"FEEDBACK"===t&&(this.state.data[e]=s)},t.prototype.onKeyDown=function(t){"Meta"===t.key||"Control"===t.key?(t.preventDefault(),this.state.isControlKeyPressed=!0,this.state.isShiftKeyPressed=!1,this.notifyEvent()):"Alt"!==t.key&&"Shift"!==t.key||(t.preventDefault(),this.state.isControlKeyPressed=!1,this.state.isShiftKeyPressed=!0,this.notifyEvent()),this.setCursor()},t.prototype.onKeyUp=function(t){"Meta"===t.key||"Control"===t.key?this.state.isControlKeyPressed=!1:"Alt"!==t.key&&"Shift"!==t.key||(this.state.isShiftKeyPressed=!1),this.setCursor()},t.prototype.onMouseDown=function(t){var e=t.pageX||t.clientX,s=t.pageY||t.clientY,i=this.state.wrapper.getClientRects()[0],o=window.scrollX,n=window.scrollY;if(!(!this.state.isActive||2===t.button||s<i.top+n||s>i.bottom+n||e<i.left+o||e>i.right+o)){t.preventDefault();var r=e-(i.left+o),a=s-(i.top+n);this.state.isMouseDown=!0,this.state.mousePos={startX:r,startY:a,endX:r,endY:a},this.notifyEvent(),window.addEventListener("mousemove",this.onMouseMove,!1),window.addEventListener("mouseup",this.onMouseUp,!1)}},t.prototype.onMouseMove=function(t){var e=this;if(this.state.isMouseDown){var s=t.pageX||t.clientX,i=t.pageY||t.clientY,o=this.state.wrapper.getClientRects()[0],n=window.scrollX,r=window.scrollY;this.state.mousePos.endX=s-(o.left+n),this.state.mousePos.endY=i-(o.top+r);var a=Math.min(this.state.mousePos.startY,this.state.mousePos.endY),h=Math.min(this.state.mousePos.startX,this.state.mousePos.endX),l=Math.max(this.state.mousePos.startX,this.state.mousePos.endX),c=Math.max(this.state.mousePos.startY,this.state.mousePos.endY);this.option.isAllowOverSelection||(a=Math.max(a,0),h=Math.max(h,0),l=Math.min(l,this.state.wrapper.offsetWidth),c=Math.min(c,this.state.wrapper.offsetHeight)),this.elementSelection.style.display="inline",this.elementSelection.style.top=a+"px",this.elementSelection.style.left=h+"px",this.elementSelection.style.width=Math.abs(l-h)+"px",this.elementSelection.style.height=Math.abs(c-a)+"px",this.mouseMoveRafId=window.requestAnimationFrame(function(){return e.notifyEvent()})}},t.prototype.onMouseUp=function(){this.state.isMouseDown&&(this.state.isMouseDown=!1,this.state.mousePos={startX:0,startY:0,endX:0,endY:0},this.elementSelection.style.display="none",-1!==this.mouseMoveRafId&&(window.cancelAnimationFrame(this.mouseMoveRafId),this.mouseMoveRafId=-1),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),this.option.onSelected(this.state.data))},t.prototype.onResize=function(){var t=this;this.resizeTID&&clearTimeout(this.resizeTID),this.resizeTID=setTimeout(function(){t.dragSelectorMain.notifyAll("RESIZE",t.state.mousePos)},500)},t.prototype.removeSelectArea=function(){var t=this.state.wrapper.querySelector("."+this.elementSelection.className);t&&t.remove()},t.prototype.setActive=function(t){this.state.isActive=t},t.prototype.setAllSelection=function(t){if(this.state.data=this.state.data.map(function(){return t}),t){var e=this.state.wrapper.getClientRects()[0];this.state.mousePos={startX:e.left,startY:e.top,endX:e.right,endY:e.bottom}}else this.state.mousePos={startX:0,startY:0,endX:0,endY:0};this.notifyEvent(),this.option.onSelected(this.state.data)},t.prototype.destroy=function(){this.removeSelectArea(),this.dragSelectorMain.clearObservers(),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp),window.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("resize",this.onResize)},t}();e.DragSelector=c},52:function(t,e,s){"use strict";var i=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],s=0;return e?e.call(t):{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){this.observers=[]}return t.prototype.addObserver=function(t){return this.observers.push(t),this.observers.length},t.prototype.notifyAll=function(t,e){var s,o;try{for(var n=i(this.observers),r=n.next();!r.done;r=n.next())r.value.updateStatus(t,e)}catch(t){s={error:t}}finally{try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(s)throw s.error}}},t.prototype.clearObservers=function(){var t,e;try{for(var s=i(this.observers),o=s.next();!o.done;o=s.next())o.value.destroy()}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}this.observers=[]},t}();e.DragSelectorMain=o},53:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.option=null,this.content=null,this.contentIndex=-1,this.proxied={isActived:!1,top:0,left:0,right:0,bottom:0},this.option=t,this.content=t.el,this.contentIndex=t.index,this.proxied={isActived:!1,top:this.content.offsetTop,left:this.content.offsetLeft,right:this.content.offsetLeft+this.content.clientWidth,bottom:this.content.offsetTop+this.content.clientHeight},"true"===this.content.getAttribute("data-selected")&&(this.addClass(["ds-selected"]),this.proxied.isActived=!0)}return Object.defineProperty(t.prototype,"isActived",{get:function(){return!!this.proxied.isActived},set:function(t){t!==this.proxied.isActived&&(t?(this.option.broadcast("FEEDBACK",this.contentIndex,!0),this.addClass(["ds-selected"])):(this.option.broadcast("FEEDBACK",this.contentIndex,!1),this.removeClass(["ds-selected"])),this.proxied.isActived=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.proxied.top},set:function(t){this.proxied.top=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.proxied.left},set:function(t){this.proxied.left=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.proxied.right},set:function(t){this.proxied.right=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.proxied.bottom},set:function(t){this.proxied.bottom=t},enumerable:!0,configurable:!0}),t.prototype.updateStatus=function(t,e){switch(t){case"DRAG":this.checkWaypointActived(e,"");break;case"DRAG_ADD":this.checkWaypointActived(e,"META");break;case"DRAG_SUB":this.checkWaypointActived(e,"SHIFT");break;case"RESIZE":this.top=this.content.offsetTop,this.left=this.content.offsetLeft,this.right=this.content.offsetLeft+this.content.clientWidth,this.bottom=this.content.offsetTop+this.content.clientHeight}},t.prototype.destroy=function(){this.removeClass(["ds-selected"])},t.prototype.checkWaypointActived=function(t,e){var s=Math.min(t.startX,t.endX),i=Math.min(t.startY,t.endY),o=Math.max(t.startX,t.endX),n=Math.max(t.startY,t.endY)>=this.top&&i<=this.bottom&&o>=this.left&&s<=this.right;""===e?this.isActived=n:n&&("META"===e?this.isActived=!0:"SHIFT"===e&&(this.isActived=!1))},t.prototype.addClass=function(t){var e=this;t.forEach(function(t){return e.content.classList.add(t)})},t.prototype.removeClass=function(t){var e=this;t.forEach(function(t){return e.content.classList.remove(t)})},t}();e.DragSelectorClient=i},54:function(t,e,s){}}]);
//# sourceMappingURL=6-66ad934b.js.map